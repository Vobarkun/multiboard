<head>
    <title>Multiboard</title>
    <meta charset="utf-8"/>
    <link rel="shortcut icon" type="image/png" href="https://www.chessbomb.com/favicon.ico" />
    <style>
        .container {
            transform-origin: 0 0;
            text-align: center;
            width: 100%;
            margin-bottom: 6px;
            margin-top: 6px;
        }

        .card {
            margin-right: 5px;
            margin-left: 5px;
            margin-bottom: 10px;
            border-radius: 4px;
            overflow: hidden;
            display: inline-block;
            position: relative;
            box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
        }

        .crop {
            width: 497px;
            height: 716px;
            overflow: hidden;
            transform-origin: 0 0;
        }

        .close {
            text-align: center;
            font-size: 300%;
            width: 30px;
            height: 44px;
            top: -14;
            right: 0;
            position: absolute;
            user-select: none;
            opacity: 0;
            background-color: firebrick;
        }

        .close:hover {
            opacity: 1;
        }

        iframe {
            position: relative;
            left: -2px;
            top: -2px;
            width: 800px;
            height: 750px;
            border: none;
            overflow: hidden;
        }
        html {
            scrollbar-width: none;
            background-color: #272B30;
        }
    </style>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="paths.js"></script>
    <script>
        function adjustScale() {
            sx = window.innerWidth / 510
            sy = window.innerHeight / 735
            $(".container").each(function(index) {
                children = $(this).children()
                l = children.length
                height = Math.max(1, Math.floor(Math.sqrt(l / sx * sy * 1.966)))
                maxwidth = Math.round(6 / 1920 * window.innerWidth)
                width = Math.min(Math.ceil(l / height), maxwidth)
                height = Math.ceil(l / width)
                scale = Math.max(Math.min(sx / width**1.0105, sy / height), sx / maxwidth**1.0105)

                children.each(function(index) {
                    $(this).children().css("transform", "scale(" + scale + ")")
                    $(this).css("width", 497 * scale + "px")
                    $(this).css("height", 716 * scale + "px")
                });
            });
        }

        $(document).ready(function () {
            var urlParams = new URLSearchParams(window.location.search)
            if (urlParams.has("n")) {
                n = parseInt(urlParams.get("n")) 
                paths = [paths[n-1]]
            }
            for (i = 0; i < paths.length; i++) {
                $("body").append("<div class='container' id='container" + i + "'></div>")                
                c = $("#container" + i)

                l = paths[i].length

                for (j = 0; j < l; j++) {
                    c.append(
                        `<div class="card">
                            <div class="crop">
                                <iframe src="https://www.chessbomb.com/arena/${paths[i][j]}?layout=e3&theme=slate&static=0" scrolling="no" frameborder="0"></iframe>
                                <div class="close" onclick="this.parentNode.parentNode.parentNode.removeChild(this.parentNode.parentNode); adjustScale(); return false;">Ã—</div>
                            </div>
                        </div>`
                    )
                }
                adjustScale()
            }
            window.onresize = adjustScale;
        });
    </script>
</head>

<body>
</body>